# Section 4 - Spring Framework 고급 기술

### 즉시 초기화와 지연 초기화
스프링 빈의 기본 초기화는 즉시 초기화 방식으로 컨텍스트가 생성될 때 빈도 초기화 된다.
@Lazy 애노테이션을 사용하면 빈을 사용할 때 초기화 하는 지연 초기화 방식으로 사용할 수 있다.
@Lazy 애노테이션은 @Component, @Bean 등 대부분의 경우 사용할 수 있으며 @Configuration 에 사용할 경우 포함되는 모든 빈이 지연 초기화 된다.
지연 초기화 할 경우 실제 의존성 대신 Lazy-resolution proxy 가 주입된다.
하지만 지연 초기화를 할 경우 애플리케이션 실행 시에 오류가 검출 되지 않기 때문에 특수한 경우에만 사용하는 것을 권장한다.

### 빈 스코프 - 싱글톤과 프로토타입
기본적으로 스프링에서 생성되는 빈은 모두 싱글톤으로 빈을 호출할 때 마다 같은 인스턴스가 반환된다.
만약 빈을 호출할 때 마다 다른 인스턴스를 사용하고 싶으면 빈 스코프를 프로토타입으로 설정하면 된다.

자바 싱글톤과 스프링 싱글톤의 차이
 - 자바 싱글톤 - JVM 전체에 객체가 하나
 - 스프링 싱글톤 - 스프링 컨텍스트에 객체가 하나

### Post Construct 와 Pre Destroy
@Component 안의 메소드에 @PostConstruct 애노테이션을 추가하면 의존성 주입이 완료된 후 바로 실행된다.

다른 빈에서 해당 빈을 사용하기 전에 해야할 작업이 있다면 이 애노테이션을 사용하면 된다.

반대로 애플리케이션이 종료되기 전이나 컨텍스트에서 빈이 삭제되기 전에 해야되는 작업이 있다면 @PreDestroy 애노테이션을 사용하면 된다.

### Java Configuration 대신 XML 파일로 설정해보자


### 정리 - 몰랐던 사실
스프링 빈 스코프를 프로토 타입으로 설정해주면 빈을 호출할 때 마다 새로운 인스터슨터를 생성해서 사용할 수 있다. (쓸 일은 별로 없을 듯)

@PostConstruct 와 @PreDestroy 가 필요한 경우를 생각해보자.